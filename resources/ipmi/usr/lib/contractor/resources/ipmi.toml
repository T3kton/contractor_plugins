sflinks = [ [ 'linux-base', 'ipmi-base' ] ]

[ foundation.ipmi-base ]
  description = 'Base IPMI VM'
  scripts = { 'create' = 'ipmi-create', 'destroy' = 'ipmi-destroy' }
  foundation_types = [ 'IPMI' ]
  config_values = {}
  template = {}
  physical_interface_names = [ 'eth0' ]

[ script.ipmi-create ]
  description = 'Create IPMI Server'
  script = """# Test and Configure IPMI Server
while not foundation.link_test() do
begin()
  pause( msg="IPMI Link test failed, resume to try again." )
end
foundation.wait_for_poweroff()
"""

[ script.ipmi-destroy ]
  description = 'Destroy IPMI Server'
  script = """# Decommission IPMI Server
foundation.power_off()
"""
